<?php

require_once '/Users/sebi/entwicklung/wachplan/include/Mail.inc';

/**
 * Test class for Mail.
 * Generated by PHPUnit on 2015-11-03 at 08:27:48.
 */
class MailTest extends PHPUnit_Framework_TestCase
{
    /**
     * @var Mail
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new Mail('test@localhost.de','Hallo');
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
    }

    /**
     * @covers Mail::setText
     */
    public function testSetText()
    {
        $text = "Das ist ein Beispieltext";
        $this->object->setText($text);
        $this->assertEquals($text,$this->object->getText());
    }

    /**
     * @covers Mail::loadTemplate
     */
    public function testLoadTemplate()
    {
        $this->object->loadTemplate('addUser', array());
        $text = $this->object->getText();
        $this->assertNotNull($text);

        $filename = dirname(__FILE__) . '/../mail_template/addUser.mail';
        $filehandle = fopen($filename, 'r');
        $betreff = fgets($filehandle);
        $this->assertEquals($betreff,$this->object->getBetreff());

        while ($line = fgets($filehandle)) {
            $textFile .= $line;
        }//end while
        $this->assertEquals($textFile,$text);
    }

    /**
     * @covers Mail::setBetreff
     */
    public function testSetBetreff()
    {
        $betreff = "Das ist ein Beispieltext";
        $this->object->setBetreff($betreff);
        $this->assertEquals($betreff,$this->object->getBetreff());
    }

    /**
     * @covers Mail::sendMail
     */
    /*public function testSendMail()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }*/
}
?>
